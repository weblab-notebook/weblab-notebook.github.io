"use strict";(self.webpackChunkweblab_website=self.webpackChunkweblab_website||[]).push([[191],{8298:function(e,n,t){var r=t(5318),o=t(3257);n.Z=void 0;var i=o(t(7294)),u=(0,r(t(6461)).default)(i.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=u},1678:function(e,n,t){var r=t(5318),o=t(3257);n.Z=void 0;var i=o(t(7294)),u=(0,r(t(6461)).default)(i.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"}),"Description");n.Z=u},5188:function(e,n,t){var r=t(5318),o=t(3257);n.Z=void 0;var i=o(t(7294)),u=(0,r(t(6461)).default)(i.createElement("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew");n.Z=u},1169:function(e,n,t){var r=t(5318),o=t(3257);n.Z=void 0;var i=o(t(7294)),u=(0,r(t(6461)).default)(i.createElement("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt");n.Z=u},1946:function(e,n,t){t.d(n,{t8:function(){return s},U2:function(){return d},Od:function(){return a},Ed:function(){return v},qo:function(){return f},nI:function(){return l}});var r=t(7842),o=t(4556),i=t(7104),u=t(3128);function c(e,n,t){for(;;){var r=t;if(void 0===r)return;var i=o.dG(o.ys(0,r.key))&(e.length-1|0),u=n[i];void 0!==u?u.next=r:e[i]=r,n[i]=r,t=r.next}}function s(e,n,t){var r=e.buckets,i=r.length,u=o.dG(o.ys(0,n))&(i-1|0),s=r[u];if(void 0!==s?function(e,n,t){for(;;){var r=t;if(r.key===e)return r.value=n,!1;var o=r.next;if(void 0===o)return!0;t=o}}(n,t,s)&&(r[u]={key:n,value:t,next:s},e.size=e.size+1|0):(r[u]={key:n,value:t,next:void 0},e.size=e.size+1|0),e.size>i<<1){var a=e.buckets,d=a.length,l=d<<1;if(l<d)return;var v=new Array(l),f=new Array(l);e.buckets=v;for(var _=0;_<d;++_)c(v,f,a[_]);for(var m=0;m<l;++m){var h=f[m];void 0!==h&&(h.next=void 0)}}else;}function a(e,n){var t=e.buckets,r=o.dG(o.ys(0,n))&(t.length-1|0),i=t[r];if(void 0!==i){if(i.key===n)return t[r]=i.next,void(e.size=e.size-1|0);for(var u=i,c=i.next;;){var s=c,a=u;if(void 0===s)return;var d=s.next;if(s.key===n)return a.next=d,void(e.size=e.size-1|0);c=d,u=s}}}function d(e,n){var t=e.buckets,i=t[o.dG(o.ys(0,n))&(t.length-1|0)];if(void 0!==i){if(n===i.key)return r.G(i.value);var u=i.next;if(void 0!==u){if(n===u.key)return r.G(u.value);var c=u.next;if(void 0!==c){if(n===c.key)return r.G(c.value);for(var s=c.next;;){var a=s;if(void 0===a)return;if(n===a.key)return r.G(a.value);s=a.next}}}}}function l(e){for(var n=e.length,t=u.Sy(void 0,void 0,n),r=0;r<n;++r){var o=e[r];s(t,o[0],o[1])}return t}u.ZH,u.xb,i.JG,i.bA;var v=i.Ed,f=(i.Ox,i.u4,i.I5,i.$A,i.qo);i.iI,i.EF,i.Qm,i.Sr},5993:function(e,n,t){t.d(n,{IH:function(){return s},e$:function(){return a},Sy:function(){return d},Od:function(){return c},qo:function(){return l}});var r=t(4556);t(9090),t(9871);function o(e,n,t){for(;;){var r=t,o=e;n[o]=r.key;var i=r.next;if(void 0===i)return o+1|0;t=i,e=o+1|0}}var i=t(3128);function u(e,n,t){for(;;){var o=t;if(void 0===o)return;var i=r.dG(r.er(0,o.key))&(e.length-1|0),u=n[i];void 0!==u?u.next=o:e[i]=o,n[i]=o,t=o.next}}function c(e,n){var t=e.buckets,o=r.dG(r.er(0,n))&(t.length-1|0),i=t[o];if(void 0!==i){var u=i.next;if(i.key===n)return e.size=e.size-1|0,void(t[o]=u);if(void 0!==u)for(var c=i,s=u;;){var a=s,d=c,l=a.next;if(a.key===n)return d.next=l,void(e.size=e.size-1|0);if(void 0===l)return;s=l,c=a}}}function s(e,n){var t=e.buckets,o=t.length,i=r.dG(r.er(0,n))&(o-1|0),c=t[i];if(void 0!==c?function(e,n,t){for(;;){var r=t;if(r.key===n)return;var o=r.next;if(void 0===o)return e.size=e.size+1|0,void(r.next={key:n,next:void 0});t=o}}(e,n,c):(t[i]={key:n,next:void 0},e.size=e.size+1|0),e.size>o<<1){var s=e.buckets,a=s.length,d=a<<1;if(d<a)return;var l=new Array(d),v=new Array(d);e.buckets=l;for(var f=0;f<a;++f)u(l,v,s[f]);for(var _=0;_<d;++_){var m=v[_];void 0!==m&&(m.next=void 0)}}else;}function a(e,n){var t=e.buckets,o=t[r.dG(r.er(0,n))&(t.length-1|0)];if(void 0===o)return!1;for(var i=o;;){var u=i;if(u.key===n)return!0;var c=u.next;if(void 0===c)return!1;i=c}}function d(e){return i.Sy(void 0,void 0,e)}i.ZH,i.xb;var l=function(e){for(var n=e.buckets,t=0,r=new Array(e.size),i=0,u=n.length;i<u;++i){var c=n[i];void 0!==c&&(t=o(t,r,c))}return r}},7638:function(e,n,t){t.d(n,{UI:function(){return o},VS:function(){return i},tj:function(){return u}});var r=t(9090);function o(e,n){return function(e,n){return 0===e.TAG?{TAG:0,_0:n(e._0)}:{TAG:1,_0:e._0}}(e,r.Dm(n))}function i(e,n){return function(e,n){return 0===e.TAG?n(e._0):{TAG:1,_0:e._0}}(e,r.Dm(n))}function u(e,n){return 0===e.TAG?e._0:n}},8481:function(e,n,t){t.d(n,{Yo:function(){return o}});var r=t(7842);function o(e){if(void 0!==e)return r.xt(e)}},9722:function(e,n,t){t.d(n,{Bj:function(){return u},oL:function(){return s},D1:function(){return c},HJ:function(){return i}});var r=t(9090),o=t(3082);function i(e){return t.e(980).then(t.bind(t,7980)).then((function(e){return Promise.resolve(r._1(e.reset_envs,void 0))}))}function u(e){return t.e(980).then(t.bind(t,7980)).then((function(n){return r._1(n.eval_cell,e)})).then((function(e){var n,t,r="undefined"===(t=typeof(n=e))?3:null===n?2:"number"===t?{TAG:0,_0:n}:"string"===t?{TAG:1,_0:n}:"boolean"===t?!0===n?1:0:"function"===t?{TAG:2,_0:n}:"object"===t?{TAG:3,_0:n}:{TAG:4,_0:n};if("number"==typeof r)return Promise.reject(o.A0("Wrong type of interpreter output."));switch(0|r.TAG){case 1:return Promise.resolve({TAG:0,_0:r._0});case 3:return Promise.resolve({TAG:1,_0:e.outerHTML});default:return Promise.reject(o.A0("Wrong type of interpreter output."))}}))}function c(e){return t.e(980).then(t.bind(t,7980)).then((function(n){return Promise.resolve(r._1(n.list_properties,e))}))}function s(e){return t.e(980).then(t.bind(t,7980)).then((function(n){return Promise.resolve(r._1(n.get_type,e))}))}},8904:function(e,n,t){t.d(n,{Q:function(){return o}});var r=t(9090);function o(e){return t.e(873).then(t.bind(t,873)).then((function(n){return Promise.resolve(r._1(n.markdown,e))})).catch((function(e){return Promise.resolve("Failed to import module weblab-markdown")}))}},6053:function(e,n,t){t.d(n,{Mf:function(){return d},JB:function(){return l},U2:function(){return v},I$:function(){return f}});var r=t(3082),o=t(8818),i=t(7638),u=t(7842),c=t(5479),s=t(5993),a=t(6328);function d(e,n){switch(0|n.TAG){case 0:var t=n._1,r=n._0;switch(s.IH(e.files,r),0|t.TAG){case 0:case 1:window.localStorage.setItem(r,t._0)}return{files:e.files};case 1:for(var i=n._1,c=n._0,a=0,d=window.localStorage.length;a<d;++a){var l=window.localStorage.key(a);(l.endsWith(".ijsnb")||l.endsWith(".ipynb")||l.endsWith(".json")||l.endsWith(".txt"))&&s.IH(e.files,l)}switch(s.IH(e.files,c),0|i.TAG){case 0:case 1:window.localStorage.setItem(c,i._0)}return{files:e.files};case 2:var v=n._0;return s.Od(e.files,v),window.localStorage.removeItem(v),{files:e.files};case 3:var f=n._1,_=n._0;return s.e$(e.files,_)&&!s.e$(e.files,f)&&o.Ed(u.Tl(window.localStorage.getItem(_)),(function(n){s.Od(e.files,_),s.IH(e.files,f),window.localStorage.setItem(f,n),window.localStorage.removeItem(_)})),{files:e.files}}}function l(e){var n=e.name;return n.endsWith(".ijsnb")?e.text().then((function(e){return Promise.resolve({TAG:0,_0:e})})):n.endsWith(".ipynb")?e.text().then((function(e){return Promise.resolve({TAG:1,_0:e})})):n.endsWith(".json")?Promise.resolve({TAG:3,_0:URL.createObjectURL(e)}):n.endsWith(".txt")?e.text().then((function(e){return Promise.resolve({TAG:2,_0:e})})):Promise.reject(r.A0("Wrong file extension"))}function v(e,n){if(!s.e$(e,n))return{TAG:1,_0:{RE_EXN_ID:c.s0}};if(n.endsWith(".ijsnb")){var t=window.localStorage.getItem(n);return null==t?{TAG:1,_0:{RE_EXN_ID:c.s0}}:{TAG:0,_0:{TAG:0,_0:t}}}if(n.endsWith(".ipynb")){var r=window.localStorage.getItem(n);return null==r?{TAG:1,_0:{RE_EXN_ID:c.s0}}:{TAG:0,_0:{TAG:1,_0:r}}}if(n.endsWith(".json")){var o=window.localStorage.getItem(n);return null==o?{TAG:1,_0:{RE_EXN_ID:c.s0}}:{TAG:0,_0:{TAG:3,_0:o}}}if(!n.endsWith(".txt"))return{TAG:1,_0:{RE_EXN_ID:c.YC}};var i=window.localStorage.getItem(n);return null==i?{TAG:1,_0:{RE_EXN_ID:c.s0}}:{TAG:0,_0:{TAG:2,_0:i}}}function f(e,n,t){return c.d9(i.UI(v(n,e),(function(n){switch(0|n.TAG){case 0:case 1:return void c.d9(i.UI(a.dw(n._0),(function(n){return a.j3(e,n,t)})));case 2:case 3:return}})))}},460:function(e,n,t){t.d(n,{fK:function(){return a},ur:function(){return d},Bj:function(){return l}});var r=t(9090),o=t(2858),i=t(8818),u=t(1946),c=t(8904),s=t(9722);function a(e,n,t,r,o,i,u){return{cell_type:void 0!==e?e:0,metadata:void 0!==n?n:"",source:{contents:void 0!==t?t:""},outputs:{contents:void 0!==r?r:[{TAG:0,_0:""}]},display_input:{contents:void 0!==o?o:"inline-block"},index:void 0!==i?i:0}}function d(e,n){if("number"==typeof n)return u.Ed(e.cells,(function(e,n){return n.cell_type?void 0:void(n.outputs.contents=[{TAG:0,_0:""}])})),{name:e.name,count:e.count,indices:e.indices,cells:e.cells};switch(0|n.TAG){case 0:var t=i.UI(i.VS(i.VS(n._0,(function(n){return o.ih(o.Su(e.indices,(function(e,t){if(t===n)return e})),i.pC)})),(function(n){return i.VS(n,(function(n){return o.lx(e.indices,n+1|0)}))})),(function(n){return o.zo(n[0],o.zo({hd:e.count,tl:0},n[1]))}));return void 0!==t?{name:e.name,count:e.count+1|0,indices:t,cells:(u.t8(e.cells,e.count,a(0,void 0,void 0,void 0,void 0,e.count)),e.cells)}:{name:e.name,count:e.count+1|0,indices:o.zo(e.indices,{hd:e.count,tl:0}),cells:(u.t8(e.cells,e.count,a(0,void 0,void 0,void 0,void 0,e.count)),e.cells)};case 1:var r=i.UI(i.VS(i.VS(n._0,(function(n){return o.ih(o.Su(e.indices,(function(e,t){if(t===n)return e})),i.pC)})),(function(n){return i.VS(n,(function(n){return o.lx(e.indices,n+1|0)}))})),(function(n){return o.zo(n[0],o.zo({hd:e.count,tl:0},n[1]))}));return void 0!==r?{name:e.name,count:e.count+1|0,indices:r,cells:(u.t8(e.cells,e.count,a(1,void 0,void 0,void 0,void 0,e.count)),console.log(a(1,void 0,void 0,void 0,void 0,e.count)),e.cells)}:{name:e.name,count:e.count+1|0,indices:o.zo(e.indices,{hd:e.count,tl:0}),cells:(u.t8(e.cells,e.count,a(1,void 0,void 0,void 0,void 0,e.count)),e.cells)};case 2:var c=i.VS(n._0,(function(n){return i.VS(i.VS(o.ih(o.Su(e.indices,(function(e,t){if(t===n)return e})),i.pC),(function(n){return i.VS(n,(function(n){return o.lx(e.indices,n)}))})),(function(t){var r=t[0];return i.UI(o.Gb(t[1]),(function(t){return u.Od(e.cells,n),o.zo(r,t)}))}))}));return void 0!==c?{name:e.name,count:e.count,indices:c,cells:e.cells}:e;case 3:var s=i.UI(i.VS(i.VS(n._0,(function(n){return o.ih(o.Su(e.indices,(function(e,t){if(t===n)return e})),i.pC)})),(function(n){return i.VS(n,(function(n){return o.lx(e.indices,n-1|0)}))})),(function(e){var n=e[1],t=e[0];if(!n)return t;var r=n.tl,i=n.hd;if(!r)return o.zo(t,{hd:i,tl:0});var u=r.tl,c=r.hd;return u?o.zo(t,o.zo({hd:c,tl:{hd:i,tl:0}},u)):o.zo(t,{hd:c,tl:{hd:i,tl:0}})}));return void 0!==s?{name:e.name,count:e.count,indices:s,cells:e.cells}:e;case 4:var d=i.UI(i.VS(i.VS(n._0,(function(n){return o.ih(o.Su(e.indices,(function(e,t){if(t===n)return e})),i.pC)})),(function(n){return i.VS(n,(function(n){return o.lx(e.indices,n)}))})),(function(e){var n=e[1],t=e[0];if(!n)return t;var r=n.tl,i=n.hd;if(!r)return o.zo(t,{hd:i,tl:0});var u=r.tl,c=r.hd;return u?o.zo(t,o.zo({hd:c,tl:{hd:i,tl:0}},u)):o.zo(t,{hd:c,tl:{hd:i,tl:0}})}));return void 0!==d?{name:e.name,count:e.count,indices:d,cells:e.cells}:e;case 5:return n._0;case 6:var l=n._2,v=n._1,f=u.U2(e.cells,n._0);return i.tj(i.UI(f,(function(e){e.outputs.contents=v,e.display_input.contents=l})),void 0),{name:e.name,count:e.count,indices:e.indices,cells:e.cells};case 7:return{name:n._0,count:e.count,indices:e.indices,cells:e.cells};case 8:return i.VS(n._0,(function(n){return i.UI(i.VS(o.U2(e.indices,n),(function(n){return u.U2(e.cells,n)})),(function(e){return e.cell_type?void 0:void(e.outputs.contents=[{TAG:0,_0:""}])}))})),{name:e.name,count:e.count,indices:e.indices,cells:e.cells}}}function l(e,n){return e.cell_type?c.Q(e.source.contents).then((function(t){return Promise.resolve(r._1(n,{TAG:6,_0:e.index,_1:[{TAG:0,_0:t}],_2:"none"}))})).catch((function(t){return Promise.resolve(r._1(n,{TAG:6,_0:e.index,_1:[{TAG:0,_0:"Could not parse markdown input"}],_2:"inline-block"}))})):s.Bj(e.source.contents).then((function(t){return Promise.resolve(r._1(n,{TAG:6,_0:e.index,_1:[t],_2:"inline-block"}))})).catch((function(t){return Promise.resolve(r._1(n,{TAG:6,_0:e.index,_1:[{TAG:0,_0:"Could not evaluate code input"}],_2:"inline-block"}))}))}},911:function(e,n,t){t.d(n,{eh:function(){return T},I6:function(){return A},$w:function(){return I}});var r=t(9090),o=t(9871),i=t(6406),u=t(8818),c=t(7638),s=t(7842),a=t(5479),d=t(1946),l=t(1805),v=t(6053),f=t(8481),_=t(6328),m=t(5329),h=t(8904);function w(e){return e.then((function(e){var n=e.data,t=e.error;if(null!=n&&null==t)return Promise.resolve(void 0);if(null==t)throw a.FO({RE_EXN_ID:a.v0,_1:"Invalid response from storage."});throw a.FO({RE_EXN_ID:a.v0,_1:t.message})}))}function G(e){return e.then((function(e){var n=e.data,t=e.error;if(null!=n&&null==t)return Promise.resolve(n);if(null==t)throw a.FO({RE_EXN_ID:a.v0,_1:"Invalid response from database."});throw a.FO({RE_EXN_ID:a.v0,_1:t.message})}))}function b(e){return e.then((function(e){var n=e.data,t=e.error;if(null!=n&&null==t)return Promise.resolve(void 0);if(null==t)throw a.FO({RE_EXN_ID:a.v0,_1:"Invalid response from database."});throw a.FO({RE_EXN_ID:a.v0,_1:t.message})}))}function A(e,n){if("number"==typeof n)return 0===n?{myNotebooks:void 0,mostViewed:e.mostViewed,mostViewedCount:e.mostViewedCount,search:e.search}:{myNotebooks:e.myNotebooks,mostViewed:e.mostViewed,mostViewedCount:e.mostViewedCount,search:void 0};switch(0|n.TAG){case 0:return{myNotebooks:s.G(d.nI(o.Su(n._0,(function(e,n){return[u.tj(s.Tl(n.id),e),n]})))),mostViewed:n._1,mostViewedCount:1,search:void 0};case 1:return{myNotebooks:s.G(d.nI(o.Su(n._0,(function(e,n){return[u.tj(s.Tl(n.id),e),n]})))),mostViewed:e.mostViewed,mostViewedCount:e.mostViewedCount,search:void 0};case 2:return{myNotebooks:e.myNotebooks,mostViewed:n._0,mostViewedCount:1,search:void 0};case 3:var t=e.mostViewed,r=e.mostViewedCount;return void 0!==t&&void 0!==r?{myNotebooks:e.myNotebooks,mostViewed:o.zo(t,n._0),mostViewedCount:r+1|0,search:e.search}:e;case 4:return{myNotebooks:e.myNotebooks,mostViewed:e.mostViewed,mostViewedCount:e.mostViewedCount,search:n._0};case 5:var i=e.myNotebooks;if(void 0===i)return e;var c=s.xt(i);return d.Od(c,n._0),{myNotebooks:s.G(c),mostViewed:e.mostViewed,mostViewedCount:e.mostViewedCount,search:e.search};case 6:var a=n._0,l=e.myNotebooks,v=a.id;if(void 0===l)return e;if(null==v)return e;var f=s.xt(l);return d.t8(f,v,a),{myNotebooks:s.G(f),mostViewed:e.mostViewed,mostViewedCount:e.mostViewedCount,search:e.search}}}function T(e,n){switch(0|n.TAG){case 0:var t=n._0,i=void 0!==t?G(m.O.from("notebooks").select("*, views (count)",void 0).eq("owner_id",t.user.id)).then((function(e){return Promise.resolve(e)})).catch((function(e){return a.d9({TAG:1,_0:a.aL(e)}),Promise.resolve(void 0)})):Promise.resolve(void 0),u=G(m.O.from("notebooks").select("*, views (count)",void 0).order("count",{foreignTable:"views",ascending:!1}).limit(12,void 0)).then((function(e){return Promise.resolve(e)})).catch((function(e){return a.d9({TAG:1,_0:a.aL(e)}),Promise.resolve(void 0)}));Promise.all([i,u]).then((function(n){var t=n[0];if(void 0!==t){var o=n[1];return void 0!==o?(r._1(e,{TAG:0,_0:t,_1:o}),Promise.resolve(void 0)):Promise.resolve(void 0)}var i=n[1];return void 0!==i?(r._1(e,{TAG:2,_0:i}),Promise.resolve(void 0)):Promise.resolve(void 0)}));break;case 1:var c=n._0;void 0!==c?G(m.O.from("notebooks").select("*, views (count)",void 0).eq("owner_id",c.user.id)).then((function(n){return r._1(e,{TAG:1,_0:n}),Promise.resolve(void 0)})).catch((function(e){return a.d9({TAG:1,_0:a.aL(e)}),Promise.resolve(void 0)})):(r._1(e,0),Promise.resolve(void 0));break;case 2:var s=n._0;G(m.O.from("notebooks").select("*, views (count)",void 0).order("count",{foreignTable:"views",ascending:!1}).range(Math.imul(s,12),Math.imul(s+1|0,12)-1|0,void 0)).then((function(n){return r._1(e,{TAG:3,_0:n}),Promise.resolve(void 0)})).catch((function(e){return a.d9({TAG:1,_0:a.aL(e)}),Promise.resolve(void 0)}));break;case 3:var d=n._2;w(m.O.storage.from("notebooks").remove([n._0.user.id+"/"+n._1])).then((function(e){return b(m.O.from("notebooks").delete().match({id:f.Yo(d)}))})).then((function(n){return r._1(e,{TAG:5,_0:d}),Promise.resolve(void 0)})).catch((function(e){return a.d9({TAG:1,_0:a.aL(e)}),Promise.resolve(void 0)}));break;case 4:var l=n._1;b(m.O.from("notebooks").update({id:l.id,name:l.name,owner_id:l.owner_id,public:l.public,views:f.Yo(void 0),preview:l.preview,created:l.created,tags:l.tags,url:l.url}).match({id:f.Yo(n._0)})).then((function(n){return r._1(e,{TAG:6,_0:l}),Promise.resolve(void 0)})).catch((function(e){return a.d9({TAG:1,_0:a.aL(e)}),Promise.resolve(void 0)}));break;case 5:G(m.O.from("notebooks").select("*, views (count)",void 0).textSearch("tags",o.u4(o.UI(n._0.split(" "),(function(e){return"'"+e+"' "})),"",(function(e,n){return e.concat(n)})).replace(/(\s)'/g," | "))).then((function(n){return r._1(e,{TAG:4,_0:n}),Promise.resolve(void 0)})).catch((function(e){return a.d9({TAG:1,_0:a.aL(e)}),Promise.resolve(void 0)}))}}var p=l.Ue("HubBase-Weblab.NoMarkdownInNotebook");var k=l.Ue("HubBase-Weblab.FileExistsInStorage");function I(e,n,t){var r=c.UI(v.U2(n,t),(function(e){return e._0}));if(0===r.TAG){var u=r._0,s=e.user.id+"/"+t,d=function(e){var n=c.VS(_.dw(e),(function(e){var n=o.ih(e.cells,(function(e){return"markdown"===e.cell_type}));return void 0!==n?{TAG:0,_0:n}:{TAG:1,_0:{RE_EXN_ID:p}}}));if(0===n.TAG)return h.Q(i.U2(n._0.source,0));throw a.FO(n._0)}(u).then((function(e){return Promise.resolve(e)})).catch((function(e){var n=a.aL(e);return n.RE_EXN_ID===p?Promise.resolve(void 0):Promise.reject(a.FO(n))})),l=m.O.storage.from("notebooks").upload(s,u).then((function(e){if(null==e.error)return Promise.resolve(void 0);if(confirm("The notebook already exists. Do you want to override it?"))throw a.FO({RE_EXN_ID:k});throw a.FO({RE_EXN_ID:a.v0,_1:"The notebook wasn't uploaded to NotebookHub."})})).then((function(e){return Promise.resolve(m.O.storage.from("notebooks").getPublicUrl(s))})).then((function(e){var n=e.publicURL;if(null!=n)return Promise.resolve(n);throw a.FO({RE_EXN_ID:a.v0,_1:"Failed to get Public url."})})),G=Promise.all([l,d]).then((function(n){return b(m.O.from("notebooks").insert({id:f.Yo(void 0),name:f.Yo(t),owner_id:f.Yo(e.user.id),public:f.Yo(!0),views:f.Yo(void 0),preview:f.Yo(n[1]),created:f.Yo((new Date).toISOString().slice(0,19)),tags:f.Yo("data science"),url:f.Yo(n[0])}))})).catch((function(e){var n=a.aL(e);return n.RE_EXN_ID===k?w(m.O.storage.from("notebooks").update(s,u)):Promise.reject(a.FO(n))})).then((function(e){return Promise.resolve(m.O.storage.from("notebooks").getPublicUrl(s))})).then((function(e){var n=e.publicURL;if(null!=n)return Promise.resolve(n);throw a.FO({RE_EXN_ID:a.v0,_1:"Failed to get Public url."})}));return Promise.all([G,d]).then((function(n){return b(m.O.from("notebooks").update({id:f.Yo(void 0),name:f.Yo(t),owner_id:f.Yo(e.user.id),public:f.Yo(!0),views:f.Yo(void 0),preview:f.Yo(n[1]),created:f.Yo((new Date).toISOString().slice(0,19)),tags:f.Yo("data science"),url:f.Yo(n[0])}).match({name:f.Yo(t),owner_id:f.Yo(e.user.id)}))}))}throw a.FO(r._0)}},6328:function(e,n,t){t.d(n,{LD:function(){return I},dq:function(){return P},qv:function(){return g},j3:function(){return y},dw:function(){return b}});var r=t(9090),o=t(3082),i=t(988),u=t(2858),c=t(9871),s=t(8818),a=t(7638),d=t(5479),l=t(1946),v=function(e,n,t){var r,o;o=t.length;var i=[];for(r=0;r<o-1;++r)i.push(t[r]);var u=t[o-1];for(r=0;r<u.length;++r)i.push(u[r]);return e[n].apply(e,i)},f=t(3179);function _(e){return c.u4(e,{TAG:0,_0:[]},(function(e,n){return 0===e.TAG?0===n.TAG?{TAG:0,_0:c.zo(e._0,[n._0])}:{TAG:1,_0:n._0}:{TAG:1,_0:e._0}}))}function m(e){var n=e[0];if(0===n.TAG){var t=e[1];return 0===t.TAG?{TAG:0,_0:[n._0,t._0]}:{TAG:1,_0:t._0}}var r=e[1],o=n._0;return 0===r.TAG?{TAG:1,_0:o}:{TAG:1,_0:{RE_EXN_ID:d.w9,_1:{hd:o,tl:{hd:r._0,tl:0}}}}}var h=t(460),w=t(8904),G=t(9722);function b(e){try{return{TAG:0,_0:JSON.parse(e)}}catch(t){var n=f.UW(t);if(n.RE_EXN_ID===o.lC)return{TAG:1,_0:{RE_EXN_ID:d.Ql}};throw n}}function A(e){var n=i.U2(e.data,"text/plain");if(void 0!==n)return{TAG:0,_0:{TAG:0,_0:n}};var t=i.U2(e.data,"text/html");if(void 0!==t)return{TAG:0,_0:{TAG:1,_0:t}};var r=i.U2(e.data,"image/png");return void 0!==r?{TAG:0,_0:{TAG:2,_0:r}}:{TAG:1,_0:{RE_EXN_ID:d.pv}}}function T(e){return"code"===e?{TAG:0,_0:0}:"markdown"===e?{TAG:0,_0:1}:{TAG:1,_0:{RE_EXN_ID:d.Tk}}}function p(e){switch(0|e.TAG){case 0:return{output_type:"display_data",metadata:{},data:i.nI([["text/plain",e._0]])};case 1:return{output_type:"display_data",metadata:{},data:i.nI([["text/html",e._0]])};case 2:return{output_type:"display_data",metadata:{},data:i.nI([["image/png",e._0]])}}}function k(e){return e.cell_type?{cell_type:e.cell_type?"markdown":"code",execution_count:void 0,metadata:{},source:[e.source.contents],outputs:void 0}:{cell_type:e.cell_type?"markdown":"code",execution_count:0,metadata:{},source:[e.source.contents],outputs:c.UI(e.outputs.contents,p)}}function I(e){return Promise.all(c.Su(e.cells,(function(e,n){return s.tj(s.UI(n.outputs,(function(e){return Promise.resolve(_(c.UI(e,A)))})),w.Q(v("","concat",[n.source])).then((function(e){return Promise.resolve({TAG:0,_0:[{TAG:0,_0:e}]})}))).then((function(t){var r=T(n.cell_type);return Promise.resolve(a.UI(m([t,r]),(function(t){return h.fK(t[1],s.tj(JSON.stringify(n.metadata),""),v("","concat",[n.source]),t[0],t[1]?"none":"inline-block",e,void 0)})))}))}))).then((function(e){return Promise.resolve(_(e))}))}function y(e,n,t){Promise.all([I(n),G.HJ(void 0)]).then((function(n){return Promise.resolve(d.d9(a.UI(n[0],(function(n){var o=l.nI(c.Su(n,(function(e,n){return[e,n]}))),i=u.nI(c.Su(n,(function(e,n){return e})));return r._1(t,{TAG:5,_0:{name:e,count:n.length,indices:i,cells:o}})}))))})).catch((function(e){return alert("Error: Failed to open notebook."),Promise.reject(o.A0(e))}))}function g(e,n){var t=c.UI(c.fe(c.UI(u.qo(e),(function(e){return l.U2(n,e)})),(function(e){return e})),k),r={nbformat:4,nbformat_minor:0,metadata:i.nI([["kernel_info",i.nI([["name","Weblab"]])],["language_info",i.nI([["name","javascript"]])]]),cells:t};return s.tj(JSON.stringify(r),"Error: Failed to parse notebook.")}function P(e){return _(c.Su(e.cells,(function(e,n){var t=s.tj(s.UI(n.outputs,(function(e){return _(c.UI(e,A))})),{TAG:0,_0:[{TAG:0,_0:""}]}),r=T(n.cell_type);return a.UI(m([t,r]),(function(t){return h.fK(t[1],s.tj(JSON.stringify(n.metadata),""),v("","concat",[n.source]),t[0],t[1]?"none":"inline-block",e,void 0)}))})))}}}]);
//# sourceMappingURL=d8efeb4a85f6823cdb9ecbb6d751935b31d5f331-e10e2845fa12786b3b4a.js.map